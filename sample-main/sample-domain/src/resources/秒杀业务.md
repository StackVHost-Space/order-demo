# 秒杀（高并发）系统关注的问题
1、服务单一职责+独立部署。\
2、秒杀链接加密，防止恶意攻击，模拟秒杀请求，1000次/s攻击。防止链接暴露，自己工作人员，提前秒杀商品。\
3、库存预热+快速扣减，秒杀读多写少。无需每次实时校验库存。库存预热，数据放到redis中。信号量控制进
来秒杀的请求。\
4、动静分离，nginx做好动静分离。保证秒杀和商品详情页的动态请求才打到后端的服务集群。\
5、恶意请求拦截，识别非法攻击请求并进行拦截。\
6、流量错峰，使用各种手段，将流量分担到更大宽度的时间点。比如验证码，加入购物车。\
7、限流&熔断&降级，限制次数，限制总量，快速失败降级运行，熔断隔离防止雪崩。\
8、队列削峰，所有秒杀成功的请求，进入队列，慢慢创建订单，扣减库存即可。\

# 细节
1、在分布式系统下，秒杀商品的上架需要实现幂等性，加分布式锁，只能让一个服务器节点完成上架功能，该服务器完成上架
功能，释放锁之后，其他节点抢到分布式锁，发现商品已经上架完成就不会在执行
2、使用商品可以秒杀的数量作为信号量：
semaphore.trySetPermits(killCount);
3、秒杀成功：
RSemaphore semaphore = redissonClient.getSemaphore("xxxx");
//TODO 秒杀成功，快速下单
boolean semaphoreCount = semaphore.tryAcquire(num, 100, TimeUnit.MILLISECONDS);




